!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Utf8Utils=t.Utf8Utils||{})}(this,function(t){"use strict";function e(t,e,i){for(var n=(t.byteLength,0),r=i.length;r>n;n++){var o=i.charCodeAt(n);if(128>o)t.setUint8(e++,o>>>0&127|0);else if(2048>o)t.setUint8(e++,o>>>6&31|192),t.setUint8(e++,o>>>0&63|128);else if(65536>o)t.setUint8(e++,o>>>12&15|224),t.setUint8(e++,o>>>6&63|128),t.setUint8(e++,o>>>0&63|128);else{if(!(1114112>o))throw new Error("bad codepoint "+o);t.setUint8(e++,o>>>18&7|240),t.setUint8(e++,o>>>12&63|128),t.setUint8(e++,o>>>6&63|128),t.setUint8(e++,o>>>0&63|128)}}}function i(t,e,i){for(var n="",r=e,o=e+i;o>r;r++){var f=t.getUint8(r);if(0!==(128&f))if(192!==(224&f))if(224!==(240&f)){if(240!==(248&f))throw new Error("Invalid byte "+f.toString(16));n+=String.fromCharCode((7&f)<<18|(63&t.getUint8(++r))<<12|(63&t.getUint8(++r))<<6|(63&t.getUint8(++r))<<0)}else n+=String.fromCharCode((15&f)<<12|(63&t.getUint8(++r))<<6|(63&t.getUint8(++r))<<0);else n+=String.fromCharCode((15&f)<<6|63&t.getUint8(++r));else n+=String.fromCharCode(f)}return n}function n(t){for(var e=0,i=0,n=t.length;n>i;i++){var r=t.charCodeAt(i);if(128>r)e+=1;else if(2048>r)e+=2;else if(65536>r)e+=3;else{if(!(1114112>r))throw new Error("bad codepoint "+r);e+=4}}return e}t.utf8Write=e,t.utf8Read=i,t.utf8ByteCount=n});