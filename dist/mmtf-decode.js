var decodeMmtf=function(){"use strict";function r(r){function t(r){for(var t={},e=0;r>e;e++){var n=i();t[n]=i()}return t}function e(t){var e=r.subarray(u,u+t);return u+=t,e}function n(t){var e=r.subarray(u,u+t);u+=t;var n=65535;if(t>n){for(var a=[],i=0;i<e.length;i+=n)a.push(String.fromCharCode.apply(null,e.subarray(i,i+n)));return a.join("")}return String.fromCharCode.apply(null,e)}function a(r){for(var t=new Array(r),e=0;r>e;e++)t[e]=i();return t}function i(){var i,s,c,f=r[u];if(0===(128&f))return u++,f;if(128===(240&f))return s=15&f,u++,t(s);if(144===(240&f))return s=15&f,u++,a(s);if(160===(224&f))return s=31&f,u++,n(s);if(224===(224&f))return i=o.getInt8(u),u++,i;switch(f){case 192:return u++,null;case 194:return u++,!1;case 195:return u++,!0;case 196:return s=o.getUint8(u+1),u+=2,e(s);case 197:return s=o.getUint16(u+1),u+=3,e(s);case 198:return s=o.getUint32(u+1),u+=5,e(s);case 199:return s=o.getUint8(u+1),c=o.getUint8(u+2),u+=3,[c,e(s)];case 200:return s=o.getUint16(u+1),c=o.getUint8(u+3),u+=4,[c,e(s)];case 201:return s=o.getUint32(u+1),c=o.getUint8(u+5),u+=6,[c,e(s)];case 202:return i=o.getFloat32(u+1),u+=5,i;case 203:return i=o.getFloat64(u+1),u+=9,i;case 204:return i=r[u+1],u+=2,i;case 205:return i=o.getUint16(u+1),u+=3,i;case 206:return i=o.getUint32(u+1),u+=5,i;case 207:return u+=9,0;case 208:return i=o.getInt8(u+1),u+=2,i;case 209:return i=o.getInt16(u+1),u+=3,i;case 210:return i=o.getInt32(u+1),u+=5,i;case 211:return u+=9,0;case 212:return c=o.getUint8(u+1),u+=2,[c,e(1)];case 213:return c=o.getUint8(u+1),u+=2,[c,e(2)];case 214:return c=o.getUint8(u+1),u+=2,[c,e(4)];case 215:return c=o.getUint8(u+1),u+=2,[c,e(8)];case 216:return c=o.getUint8(u+1),u+=2,[c,e(16)];case 217:return s=o.getUint8(u+1),u+=2,n(s);case 218:return s=o.getUint16(u+1),u+=3,n(s);case 219:return s=o.getUint32(u+1),u+=5,n(s);case 220:return s=o.getUint16(u+1),u+=3,a(s);case 221:return s=o.getUint32(u+1),u+=5,a(s);case 222:return s=o.getUint16(u+1),u+=3,t(s);case 223:return s=o.getUint32(u+1),u+=5,t(s)}throw new Error("Unknown type 0x"+f.toString(16))}var u=0,o=new DataView(r.buffer);return i()}function t(r){return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}function e(r){return new Int8Array(r.buffer,r.byteOffset,r.byteLength)}function n(r,t){var e,n,a,i=(r.byteOffset,r.byteLength);for(t||(t=new Int16Array(i/2)),e=0,n=0,a=i/2;a>e;++e,n+=2)t[e]=r[n]<<8^r[n+1]<<0;return t}function a(r,t){var e,n,a,i=(r.byteOffset,r.byteLength);for(t||(t=new Int32Array(i/4)),e=0,n=0,a=i/4;a>e;++e,n+=4)t[e]=r[n]<<24^r[n+1]<<16^r[n+2]<<8^r[n+3]<<0;return t}function i(r){return new Int32Array(r.buffer,r.byteOffset,r.byteLength/4)}function u(r,t,e){var n=r.length,a=1/t;e||(e=new Float32Array(n));for(var i=0;n>i;++i)e[i]=r[i]*a;return e}function o(r,t){var e,n;if(!t){var a=0;for(e=0,n=r.length;n>e;e+=2)a+=r[e+1];t=new r.constructor(a)}var i=0;for(e=0,n=r.length;n>e;e+=2)for(var u=r[e],o=r[e+1],s=0;o>s;++s)t[i]=u,i+=1;return t}function s(r){for(var t=1,e=r.length;e>t;++t)r[t]+=r[t-1];return r}function c(r,t,e){var n=r.length/2+t.length;e||(e=new Int32Array(n));for(var a=0,i=0,u=0,o=r.length;o>u;u+=2){var s=r[u],c=r[u+1];e[a]=s,0!==u&&(e[a]+=e[a-1]),a+=1;for(var f=0;c>f;++f)e[a]=e[a-1]+t[i],a+=1,i+=1}return e}function f(r,t,e,o){var s=r.length/4/2+t.length/2;o||(o=new Float32Array(s));var f=i(o),g=c(a(r),n(t),f);return u(g,e,o)}function g(r,t,e){var n=e?i(e):void 0,s=o(a(r),n);return u(s,t,e)}function l(n,i){function u(r){return c?-1===c.indexOf(r):!0}i=i||{};var c=i.ignoreFields;n instanceof ArrayBuffer&&(n=new Uint8Array(n));var l;l=n instanceof Uint8Array?r(n):n;var v=(l.numBonds||0,l.numAtoms||0),y=l.groupTypeList.length/4,d=l.chainIdList.length/4,h=l.chainsPerModel.length,L={numGroups:y,numChains:d,numModels:h};["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","entityList","groupList","numBonds","numAtoms","groupsPerChain","chainsPerModel"].forEach(function(r){void 0!==l[r]&&(L[r]=l[r])});var U="bondAtomList";l[U]&&u(U)&&(L[U]=a(l[U]));var m="bondOrderList";l[m]&&u(m)&&(L[m]=t(l[m])),L.xCoordList=f(l.xCoordBig,l.xCoordSmall,1e3),L.yCoordList=f(l.yCoordBig,l.yCoordSmall,1e3),L.zCoordList=f(l.zCoordBig,l.zCoordSmall,1e3);var b="bFactorList",p="bFactorBig",w="bFactorSmall";l[p]&&l[w]&&u(b)&&(L[b]=f(l[p],l[w],100));var A="atomIdList";l[A]&&u(A)&&(L[A]=s(o(a(l[A]))));var C="altLocList";l[C]&&u(C)&&(L[C]=o(a(l[C]),new Uint8Array(v)));var I="occupancyList";l[I]&&u(I)&&(L[I]=g(l[I],100)),L.groupIdList=s(o(a(l.groupIdList))),L.groupTypeList=a(l.groupTypeList);var F="secStructList";l[F]&&u(F)&&(L[F]=e(l[F]));var S="insCodeList";l[S]&&u(S)&&(L[S]=o(a(l[S]),new Uint8Array(y)));var x="sequenceIndexList";l[x]&&u(x)&&(L[x]=s(o(a(l[x])))),L.chainIdList=t(l.chainIdList);var B="chainNameList";return l[B]&&u(B)&&(L[B]=t(l[B])),L}return l}();