var decodeMmtf=function(){"use strict";function t(t){function r(t){for(var r={},e=0;t>e;e++){var n=a();r[n]=a()}return r}function e(r){var e=t.subarray(o,o+r);return o+=r,e}function n(r){var e=t.subarray(o,o+r);o+=r;var n=65535;if(r>n){for(var i=[],a=0;a<e.length;a+=n)i.push(String.fromCharCode.apply(null,e.subarray(a,a+n)));return i.join("")}return String.fromCharCode.apply(null,e)}function i(t){for(var r=new Array(t),e=0;t>e;e++)r[e]=a();return r}function a(){var a,s,c,f=t[o];if(0===(128&f))return o++,f;if(128===(240&f))return s=15&f,o++,r(s);if(144===(240&f))return s=15&f,o++,i(s);if(160===(224&f))return s=31&f,o++,n(s);if(224===(224&f))return a=u.getInt8(o),o++,a;switch(f){case 192:return o++,null;case 194:return o++,!1;case 195:return o++,!0;case 196:return s=u.getUint8(o+1),o+=2,e(s);case 197:return s=u.getUint16(o+1),o+=3,e(s);case 198:return s=u.getUint32(o+1),o+=5,e(s);case 199:return s=u.getUint8(o+1),c=u.getUint8(o+2),o+=3,[c,e(s)];case 200:return s=u.getUint16(o+1),c=u.getUint8(o+3),o+=4,[c,e(s)];case 201:return s=u.getUint32(o+1),c=u.getUint8(o+5),o+=6,[c,e(s)];case 202:return a=u.getFloat32(o+1),o+=5,a;case 203:return a=u.getFloat64(o+1),o+=9,a;case 204:return a=t[o+1],o+=2,a;case 205:return a=u.getUint16(o+1),o+=3,a;case 206:return a=u.getUint32(o+1),o+=5,a;case 207:return o+=9,0;case 208:return a=u.getInt8(o+1),o+=2,a;case 209:return a=u.getInt16(o+1),o+=3,a;case 210:return a=u.getInt32(o+1),o+=5,a;case 211:return o+=9,0;case 212:return c=u.getUint8(o+1),o+=2,[c,e(1)];case 213:return c=u.getUint8(o+1),o+=2,[c,e(2)];case 214:return c=u.getUint8(o+1),o+=2,[c,e(4)];case 215:return c=u.getUint8(o+1),o+=2,[c,e(8)];case 216:return c=u.getUint8(o+1),o+=2,[c,e(16)];case 217:return s=u.getUint8(o+1),o+=2,n(s);case 218:return s=u.getUint16(o+1),o+=3,n(s);case 219:return s=u.getUint32(o+1),o+=5,n(s);case 220:return s=u.getUint16(o+1),o+=3,i(s);case 221:return s=u.getUint32(o+1),o+=5,i(s);case 222:return s=u.getUint16(o+1),o+=3,r(s);case 223:return s=u.getUint32(o+1),o+=5,r(s)}throw new Error("Unknown type 0x"+f.toString(16))}var o=0,u=new DataView(t.buffer);return a()}function r(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function e(t){return new Int8Array(t.buffer,t.byteOffset,t.byteLength)}function n(t,r){var e,n,i,a=(t.byteOffset,t.byteLength);for(r||(r=new Int16Array(a/2)),e=0,n=0,i=a/2;i>e;++e,n+=2)r[e]=t[n]<<8^t[n+1]<<0;return r}function i(t,r){var e,n,i,a=(t.byteOffset,t.byteLength);for(r||(r=new Int32Array(a/4)),e=0,n=0,i=a/4;i>e;++e,n+=4)r[e]=t[n]<<24^t[n+1]<<16^t[n+2]<<8^t[n+3]<<0;return r}function a(t){return new Int32Array(t.buffer,t.byteOffset,t.byteLength/4)}function o(t,r,e){var n=t.length,i=1/r;e||(e=new Float32Array(n));for(var a=0;n>a;++a)e[a]=t[a]*i;return e}function u(t,r){var e,n;if(!r){var i=0;for(e=0,n=t.length;n>e;e+=2)i+=t[e+1];r=new t.constructor(i)}var a=0;for(e=0,n=t.length;n>e;e+=2)for(var o=t[e],u=t[e+1],s=0;u>s;++s)r[a]=o,a+=1;return r}function s(t){for(var r=1,e=t.length;e>r;++r)t[r]+=t[r-1];return t}function c(t,r,e){var n=t.length/2+r.length;e||(e=new Int32Array(n));for(var i=0,a=0,o=0,u=t.length;u>o;o+=2){var s=t[o],c=t[o+1];e[i]=s,0!==o&&(e[i]+=e[i-1]),i+=1;for(var f=0;c>f;++f)e[i]=e[i-1]+r[a],i+=1,a+=1}return e}function f(t,r,e,u){var s=t.length/4/2+r.length/2;u||(u=new Float32Array(s));var f=a(u),g=c(i(t),n(r),f);return o(g,e,u)}function g(t,r,e){var n=e?a(e):void 0,s=u(i(t),n);return o(s,r,e)}function L(n,a){function o(t){return c?-1===c.indexOf(t):!0}a=a||{};var c=a.ignoreFields;n instanceof ArrayBuffer&&(n=new Uint8Array(n));var L;L=n instanceof Uint8Array?t(n):n;var d=(L.numBonds||0,L.numAtoms||0),l=L.groupTypeList.length/4,v=L.chainIdList.length/4,y=L.chainsPerModel.length,h={numGroups:l,numChains:v,numModels:y};["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","entityList","groupList","numBonds","numAtoms","groupsPerChain","chainsPerModel"].forEach(function(t){void 0!==L[t]&&(h[t]=L[t])});var m=L.bondAtomList;m&&o("bondAtomList")&&(h.bondAtomList=i(m));var b=L.bondOrderList;b&&o("bondOrderList")&&(h.bondOrderList=r(b)),h.xCoordList=f(L.xCoordBig,L.xCoordSmall,1e3),h.yCoordList=f(L.yCoordBig,L.yCoordSmall,1e3),h.zCoordList=f(L.zCoordBig,L.zCoordSmall,1e3);var U=L.bFactorBig,p=L.bFactorSmall;U&&p&&o("bFactorList")&&(h.bFactorList=f(U,p,100));var I=L.atomIdList;I&&o("atomIdList")&&(h.atomIdList=s(u(i(I))));var A=L.altLocList;A&&o("altLocList")&&(h.altLocList=u(A,new Uint8Array(d)));var w=L.occupancyList;w&&o("occupancyList")&&(h.occupancyList=g(w,100)),h.groupIdList=s(u(i(L.groupIdList))),h.groupTypeList=i(L.groupTypeList);var C=L.secStructList;C&&o("secStructList")&&(h.secStructList=e(C));var F=L.insCodeList;F&&o("insCodeList")&&(h.insCodeList=u(F,new Uint8Array(l)));var S=L.sequenceIdList;S&&o("sequenceIdList")&&(h.sequenceIdList=s(u(i(S)))),h.chainIdList=r(L.chainIdList);var O=L.chainNameList;return O&&o("chainNameList")&&(h.chainNameList=r(O)),h}return L}();