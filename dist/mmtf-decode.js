!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.decodeMmtf=e()}(this,function(){"use strict";function t(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function e(t){return new Int8Array(t.buffer,t.byteOffset,t.byteLength)}function n(t,e){var n,r,o,u=(t.byteOffset,t.byteLength);for(e||(e=new Int16Array(u/2)),n=0,r=0,o=u/2;o>n;++n,r+=2)e[n]=t[r]<<8^t[r+1]<<0;return e}function r(t,e){var n,r,o,u=(t.byteOffset,t.byteLength);for(e||(e=new Int32Array(u/4)),n=0,r=0,o=u/4;o>n;++n,r+=4)e[n]=t[r]<<24^t[r+1]<<16^t[r+2]<<8^t[r+3]<<0;return e}function o(t){return new Int32Array(t.buffer,t.byteOffset,t.byteLength/4)}function u(t,e){var n,r,o,u=(t.byteOffset,t.byteLength);e||(e=new Float32Array(u/4));var i=new DataView(e.buffer,e.byteOffset,e.byteLength),f=new DataView(t.buffer,t.byteOffset,t.byteLength);for(n=0,r=0,o=u/4;o>n;++n,r+=4)i.setFloat32(r,f.getFloat32(r),!0);return e}function i(t,e,n){var r=t.length,o=1/e;n||(n=new Float32Array(r));for(var u=0;r>u;++u)n[u]=t[u]*o;return n}function f(t,e){var n,r;if(!e){var o=0;for(n=0,r=t.length;r>n;n+=2)o+=t[n+1];e=new t.constructor(o)}var u=0;for(n=0,r=t.length;r>n;n+=2)for(var i=t[n],f=t[n+1],a=0;f>a;++a)e[u]=i,u+=1;return e}function a(t){for(var e=1,n=t.length;n>e;++e)t[e]+=t[e-1];return t}function s(t,e,n){var u=n?o(n):void 0,a=f(r(t),u);return i(a,e,n)}function c(t,e){var n=32767,r=-32768,o=t.length;e||(e=new Int32Array(o));for(var u=0,i=0;o>u;){for(var f=0;(t[u]===n||t[u]===r)&&(f+=t[u],u+=1,0!==t[u]););f+=t[u],u+=1,e[i]=f,i+=1}return new Int32Array(e.buffer,0,i)}function d(t,e,n){var r=a(c(t,n));return i(r,e,n)}function y(t){if(t instanceof Uint8Array){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=e.getInt32(0),r=e.getInt32(4),o=t.subarray(8,12),u=t.subarray(12);return L[n](u,r,o)}return t}function b(t,e){e=e||{};var n=e.ignoreFields,r={};return v.forEach(function(e){var o=n?-1!==n.indexOf(e):!1;o||void 0===t[e]||(r[e]=y(t[e]))}),r}var v=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel","xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],L={1:function(t,e){return u(t)},2:function(t,n){return e(t)},3:function(t,e){return n(t)},4:function(t,e){return r(t)},5:function(e,n,o){r(o)[0];return t(e)},6:function(t,e){var n=new Uint8Array(e);return f(r(t),n)},7:function(t,e){return f(r(t))},8:function(t,e){return a(f(r(t)))},9:function(t,e,n){var o=r(n)[0];return s(t,o)},10:function(t,e,o){var u=r(o)[0];return d(n(t),u)},11:function(t,e,o){var u=r(o)[0];return decodeIntegerToFloat(n(t),u)},12:function(t,e,o){var u=r(o)[0];return decodeIntegerRecursiveIndexing(n(t),u)},13:function(t,e,n){var o=r(n)[0];return decodeIntegerRecursiveIndexing(getInt8(t),o)}};return b});