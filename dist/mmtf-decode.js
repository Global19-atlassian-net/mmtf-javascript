var decodeMmtf=function(){"use strict";function r(r){function t(r){for(var t={},e=0;r>e;e++){var n=o();t[n]=o()}return t}function e(t){var e=r.subarray(i,i+t);return i+=t,e}function n(t){var e=r.subarray(i,i+t),n=String.fromCharCode.apply(null,e);return i+=t,n}function a(r){for(var t=new Array(r),e=0;r>e;e++)t[e]=o();return t}function o(){var o,c,s,f=r[i];if(0===(128&f))return i++,f;if(128===(240&f))return c=15&f,i++,t(c);if(144===(240&f))return c=15&f,i++,a(c);if(160===(224&f))return c=31&f,i++,n(c);if(224===(224&f))return o=u.getInt8(i),i++,o;switch(f){case 192:return i++,null;case 194:return i++,!1;case 195:return i++,!0;case 196:return c=u.getUint8(i+1),i+=2,e(c);case 197:return c=u.getUint16(i+1),i+=3,e(c);case 198:return c=u.getUint32(i+1),i+=5,e(c);case 199:return c=u.getUint8(i+1),s=u.getUint8(i+2),i+=3,[s,e(c)];case 200:return c=u.getUint16(i+1),s=u.getUint8(i+3),i+=4,[s,e(c)];case 201:return c=u.getUint32(i+1),s=u.getUint8(i+5),i+=6,[s,e(c)];case 202:return o=u.getFloat32(i+1),i+=5,o;case 203:return o=u.getFloat64(i+1),i+=9,o;case 204:return o=r[i+1],i+=2,o;case 205:return o=u.getUint16(i+1),i+=3,o;case 206:return o=u.getUint32(i+1),i+=5,o;case 207:return i+=9,0;case 208:return o=u.getInt8(i+1),i+=2,o;case 209:return o=u.getInt16(i+1),i+=3,o;case 210:return o=u.getInt32(i+1),i+=5,o;case 211:return i+=9,0;case 212:return s=u.getUint8(i+1),i+=2,[s,e(1)];case 213:return s=u.getUint8(i+1),i+=2,[s,e(2)];case 214:return s=u.getUint8(i+1),i+=2,[s,e(4)];case 215:return s=u.getUint8(i+1),i+=2,[s,e(8)];case 216:return s=u.getUint8(i+1),i+=2,[s,e(16)];case 217:return c=u.getUint8(i+1),i+=2,n(c);case 218:return c=u.getUint16(i+1),i+=3,n(c);case 219:return c=u.getUint32(i+1),i+=5,n(c);case 220:return c=u.getUint16(i+1),i+=3,a(c);case 221:return c=u.getUint32(i+1),i+=5,a(c);case 222:return c=u.getUint16(i+1),i+=3,t(c);case 223:return c=u.getUint32(i+1),i+=5,t(c)}throw new Error("Unknown type 0x"+f.toString(16))}var i=0,u=new DataView(r.buffer);return o()}function t(r,t){var e=new DataView(r.buffer),n=r.byteOffset,a=r.byteLength;t||(t=new Int8Array(a));for(var o=0;a>o;++o)t[o]=e.getInt8(n+o);return t}function e(r,t,e){var n=new DataView(r.buffer),a=r.byteOffset,o=r.byteLength;t||(t=new Int16Array(o/2));for(var i=0,u=o/2;u>i;++i)t[i]=n.getInt16(a+2*i,e);return t}function n(r,t,e){var n=new DataView(r.buffer),a=r.byteOffset,o=r.byteLength;t||(t=new Int32Array(o/4));for(var i=0,u=o/4;u>i;++i)t[i]=n.getInt32(a+4*i,e);return t}function a(r,t,e){var n=r.length,a=1/t;e||(e=new Float32Array(n));for(var o=0;n>o;++o)e[o]=r[o]*a;return e}function o(r,t){var e,n;if(!t){var a=0;for(e=0,n=r.length;n>e;e+=2)a+=r[e+1];t=new r.constructor(a)}var o=0;for(e=0,n=r.length;n>e;e+=2)for(var i=r[e],u=r[e+1],c=0;u>c;++c)t[o]=i,o+=1;return t}function i(r){for(var t=1,e=r.length;e>t;++t)r[t]+=r[t-1];return r}function u(r){return new Int32Array(r.buffer,r.byteOffset,r.byteLength/4)}function c(r,t,e){var n=r.length/2+t.length;e||(e=new Int32Array(n));for(var a=0,o=0,i=0,u=r.length;u>i;i+=2){var c=r[i],s=r[i+1];e[a]=c,0!==i&&(e[a]+=e[a-1]),a+=1;for(var f=0;s>f;++f)e[a]=e[a-1]+t[o],a+=1,o+=1}return e}function s(r,t,o,i,s){var f=i?u(i):void 0,g=c(n(r,void 0,s),e(t,void 0,s),f);return a(g,o,i)}function f(r,t,e,i){var c=e?u(e):void 0,s=o(n(r,void 0,i),c);return a(s,t,e)}function g(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var a=r(e);console.log(a);var u,c,g,y,d=a.numBonds,w=a.numAtoms,v=a.groupTypeList.length/4,U=a.chainList.length/4,A=a.chainsPerModel.length,h=a.groupMap,b=new Uint32Array(d+v),m=new Uint32Array(d+v),p=new Uint8Array(d+v),I=new Uint32Array(w),C=new Float32Array(w),L=new Float32Array(w),S=new Float32Array(w),F=new Float32Array(w),x=new Int32Array(w),O=new Uint8Array(w),B=new Uint8Array(w),M=new Float32Array(w),D=new Uint32Array(v),V=new Uint32Array(v),z=new Uint16Array(v),G=new Uint16Array(v),N=new Int32Array(v),P=new Uint8Array(v),T=new Uint16Array(U),k=new Uint32Array(U),E=new Uint32Array(U),j=new Uint8Array(4*U),q=new Uint32Array(A),H=new Uint32Array(A);if(s(a.xCoordBig,a.xCoordSmall,1e3,C),s(a.yCoordBig,a.yCoordSmall,1e3,L),s(a.zCoordBig,a.zCoordSmall,1e3,S),a.bFactorBig&&a.bFactorSmall&&s(a.bFactorBig,a.bFactorSmall,100,F),a.atomIdList&&i(o(n(a.atomIdList),x)),a.altLabelList){var J=a.altLabelList;for(u=0,c=J.length;c>u;u+=2){var K=J[u];"?"===K?J[u]=0:J[u]=J[u].charCodeAt(0),J[u+1]=parseInt(J[u+1])}o(J,O)}if(a.insCodeList){var Q=a.insCodeList;for(u=0,c=Q.length;c>u;u+=2){var K=Q[u];null===K?Q[u]=0:Q[u]=Q[u].charCodeAt(0),Q[u+1]=parseInt(Q[u+1])}o(Q,B)}a.occList&&f(a.occList,100,M),t(a.chainList,j);var R,W=a.chainsPerModel,X=0;for(u=0;A>u;++u){for(R=W[u],q[u]=X,H[u]=R,g=0;R>g;++g)T[g+X]=u;X+=R}var Y,Z=a.groupsPerChain,$=0;for(u=0;U>u;++u){for(Y=Z[u],k[u]=$,E[u]=Y,g=0;Y>g;++g)D[g+$]=u;$+=Y}i(o(n(a.groupNumList),N)),n(a.groupTypeList,G);var _=t(a.secStructList),rr=0,tr=0;for(u=0;v>u;++u){var er=h[G[u]],nr=er.atomInfo,ar=nr.length/2,or=er.bondIndices,ir=er.bondOrders;for(g=0,y=ir.length;y>g;++g)b[tr]=rr+or[2*g],m[tr]=rr+or[2*g+1],p[tr]=ir[g],tr+=1;for(P[u]=(l[_[u]]||"l").charCodeAt(),V[u]=rr,z[u]=ar,g=0;ar>g;++g)I[rr]=u,rr+=1}return{bondStore:{atomIndex1:b,atomIndex2:m,bondOrder:p},atomStore:{groupIndex:I,xCoord:C,yCoord:L,zCoord:S,bFactor:F,atomId:x,altLabel:O,insCode:B,occupancy:M},groupStore:{chainIndex:D,atomOffset:V,atomCount:z,groupTypeId:G,groupNum:N,secStruct:P},chainStore:{modelIndex:T,groupOffset:k,groupCount:E,chainName:j},modelStore:{chainOffset:q,chainCount:H},groupMap:h,unitCell:a.unitCell,spaceGroup:a.spaceGroup,bioAssembly:a.bioAssembly,pdbId:a.pdbId,title:a.title,numBonds:d,numAtoms:w,numGroups:v,numChains:U,numModels:A}}var l={0:"i",1:"s",2:"h",3:"e",4:"g",5:"b",6:"t",7:"l","-1":""};return g}();