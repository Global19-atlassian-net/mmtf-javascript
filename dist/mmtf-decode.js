var decodeMmtf=function(){"use strict";function r(r){function t(r){for(var t={},e=0;r>e;e++){var n=o();t[n]=o()}return t}function e(t){var e=r.subarray(i,i+t);return i+=t,e}function n(t){var e=r.subarray(i,i+t);i+=t;var n=65535;if(t>n){for(var a=[],o=0;o<e.length;o+=n)a.push(String.fromCharCode.apply(null,e.subarray(o,o+n)));return a.join("")}return String.fromCharCode.apply(null,e)}function a(r){for(var t=new Array(r),e=0;r>e;e++)t[e]=o();return t}function o(){var o,s,c,f=r[i];if(0===(128&f))return i++,f;if(128===(240&f))return s=15&f,i++,t(s);if(144===(240&f))return s=15&f,i++,a(s);if(160===(224&f))return s=31&f,i++,n(s);if(224===(224&f))return o=u.getInt8(i),i++,o;switch(f){case 192:return i++,null;case 194:return i++,!1;case 195:return i++,!0;case 196:return s=u.getUint8(i+1),i+=2,e(s);case 197:return s=u.getUint16(i+1),i+=3,e(s);case 198:return s=u.getUint32(i+1),i+=5,e(s);case 199:return s=u.getUint8(i+1),c=u.getUint8(i+2),i+=3,[c,e(s)];case 200:return s=u.getUint16(i+1),c=u.getUint8(i+3),i+=4,[c,e(s)];case 201:return s=u.getUint32(i+1),c=u.getUint8(i+5),i+=6,[c,e(s)];case 202:return o=u.getFloat32(i+1),i+=5,o;case 203:return o=u.getFloat64(i+1),i+=9,o;case 204:return o=r[i+1],i+=2,o;case 205:return o=u.getUint16(i+1),i+=3,o;case 206:return o=u.getUint32(i+1),i+=5,o;case 207:return i+=9,0;case 208:return o=u.getInt8(i+1),i+=2,o;case 209:return o=u.getInt16(i+1),i+=3,o;case 210:return o=u.getInt32(i+1),i+=5,o;case 211:return i+=9,0;case 212:return c=u.getUint8(i+1),i+=2,[c,e(1)];case 213:return c=u.getUint8(i+1),i+=2,[c,e(2)];case 214:return c=u.getUint8(i+1),i+=2,[c,e(4)];case 215:return c=u.getUint8(i+1),i+=2,[c,e(8)];case 216:return c=u.getUint8(i+1),i+=2,[c,e(16)];case 217:return s=u.getUint8(i+1),i+=2,n(s);case 218:return s=u.getUint16(i+1),i+=3,n(s);case 219:return s=u.getUint32(i+1),i+=5,n(s);case 220:return s=u.getUint16(i+1),i+=3,a(s);case 221:return s=u.getUint32(i+1),i+=5,a(s);case 222:return s=u.getUint16(i+1),i+=3,t(s);case 223:return s=u.getUint32(i+1),i+=5,t(s)}throw new Error("Unknown type 0x"+f.toString(16))}var i=0,u=new DataView(r.buffer);return o()}function t(r){return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}function e(r){return new Int8Array(r.buffer,r.byteOffset,r.byteLength)}function n(r,t,e){var n,a,o,i=r.byteOffset,u=r.byteLength;if(t||(t=new Int16Array(u/2)),e){var s=new DataView(r.buffer);for(n=0,a=0,o=u/2;o>n;++n,a+=2)t[n]=s.getInt16(i+a,e)}else for(n=0,a=0,o=u/2;o>n;++n,a+=2)t[n]=r[a]<<8^r[a+1]<<0;return t}function a(r,t,e){var n,a,o,i=r.byteOffset,u=r.byteLength;if(t||(t=new Int32Array(u/4)),e){var s=new DataView(r.buffer);for(n=0,a=0,o=u/4;o>n;++n,a+=4)t[n]=s.getInt32(i+a,e)}else for(n=0,a=0,o=u/4;o>n;++n,a+=4)t[n]=r[a]<<24^r[a+1]<<16^r[a+2]<<8^r[a+3]<<0;return t}function o(r){return new Int32Array(r.buffer,r.byteOffset,r.byteLength/4)}function i(r,t,e){var n=r.length,a=1/t;e||(e=new Float32Array(n));for(var o=0;n>o;++o)e[o]=r[o]*a;return e}function u(r,t){var e,n;if(!t){var a=0;for(e=0,n=r.length;n>e;e+=2)a+=r[e+1];t=new r.constructor(a)}var o=0;for(e=0,n=r.length;n>e;e+=2)for(var i=r[e],u=r[e+1],s=0;u>s;++s)t[o]=i,o+=1;return t}function s(r){for(var t=1,e=r.length;e>t;++t)r[t]+=r[t-1];return r}function c(r,t,e){var n=r.length/2+t.length;e||(e=new Int32Array(n));for(var a=0,o=0,i=0,u=r.length;u>i;i+=2){var s=r[i],c=r[i+1];e[a]=s,0!==i&&(e[a]+=e[a-1]),a+=1;for(var f=0;c>f;++f)e[a]=e[a-1]+t[o],a+=1,o+=1}return e}function f(r,t,e,u,s){var f=u?o(u):void 0,d=c(a(r,void 0,s),n(t,void 0,s),f);return i(d,e,u)}function d(r,t,e,n){var s=e?o(e):void 0,c=u(a(r,void 0,n),s);return i(c,t,e)}function g(n,o){o=o||{};var i=o.littleEndian,c=o.ignoreFields||[];n instanceof ArrayBuffer&&(n=new Uint8Array(n));var g;g=n instanceof Uint8Array?r(n):n,void 0===g.chainIdList&&void 0!==g.chainList&&(g.chainIdList=g.chainList,g.groupIdList=g.groupNumList);var l,y,v,h,m=g.bFactorBig&&g.bFactorSmall&&-1===c.indexOf("bFactor"),b=g.atomIdList&&-1===c.indexOf("atomId"),w=g.altLabelList&&-1===c.indexOf("altLabel"),U=g.insCodeList&&-1===c.indexOf("insCode"),A=g.occList&&-1===c.indexOf("occupancy"),p=g.secStructList&&-1===c.indexOf("secStruct"),L=g.chainNameList&&-1===c.indexOf("chainName"),I=g.numBonds||0,C=g.numAtoms||0,O=g.groupTypeList.length/4,x=g.chainIdList.length/4,F=g.chainsPerModel.length,S=g.groupMap,B=new Uint32Array(I+O),M=new Uint32Array(I+O),N=new Uint8Array(I+O),P=new Uint32Array(C),V=new Float32Array(C),k=new Float32Array(C),z=new Float32Array(C),D=m?new Float32Array(C):void 0,G=b?new Int32Array(C):void 0,T=w?new Uint8Array(C):void 0,E=U?new Uint8Array(C):void 0,W=A?new Float32Array(C):void 0,j=new Uint32Array(O),q=new Uint32Array(O),H=new Uint16Array(O),J=new Uint16Array(O),K=new Int32Array(O),Q=p?e(g.secStructList):void 0,R=new Uint16Array(x),X=new Uint32Array(x),Y=new Uint32Array(x),Z=t(g.chainIdList),$=L?t(g.chainNameList):void 0,_=new Uint32Array(F),rr=new Uint32Array(F);if(f(g.xCoordBig,g.xCoordSmall,1e3,V,i),f(g.yCoordBig,g.yCoordSmall,1e3,k,i),f(g.zCoordBig,g.zCoordSmall,1e3,z,i),m&&f(g.bFactorBig,g.bFactorSmall,100,D,i),b&&s(u(a(g.atomIdList,void 0,i),G)),w){var tr=g.altLabelList;for(l=0,y=tr.length;y>l;l+=2){var er=tr[l];"?"===er?tr[l]=0:tr[l]=er.charCodeAt(0),tr[l+1]=parseInt(tr[l+1])}u(tr,T)}if(U){var nr=g.insCodeList;for(l=0,y=nr.length;y>l;l+=2){var ar=nr[l];null===ar?nr[l]=0:nr[l]=ar.charCodeAt(0),nr[l+1]=parseInt(nr[l+1])}u(nr,E)}A&&d(g.occList,100,W,i);var or,ir=g.chainsPerModel,ur=0;for(l=0;F>l;++l){for(or=ir[l],_[l]=ur,rr[l]=or,v=0;or>v;++v)R[v+ur]=l;ur+=or}var sr,cr=g.groupsPerChain,fr=0;for(l=0;x>l;++l){for(sr=cr[l],X[l]=fr,Y[l]=sr,v=0;sr>v;++v)j[v+fr]=l;fr+=sr}s(u(a(g.groupIdList,void 0,i),K)),a(g.groupTypeList,J,i);var dr=0,gr=0;for(l=0;O>l;++l){var lr=S[J[l]],yr=lr.atomInfo,vr=yr.length/2,hr=lr.bondIndices,mr=lr.bondOrders;for(v=0,h=mr.length;h>v;++v)B[gr]=dr+hr[2*v],M[gr]=dr+hr[2*v+1],N[gr]=mr[v],gr+=1;for(q[l]=dr,H[l]=vr,v=0;vr>v;++v)P[dr]=l,dr+=1}if(g.bondAtomList){if(g.bondOrderList){var br=g.bondOrderList;N.set(br,gr)}var wr=a(g.bondAtomList,void 0,i);for(l=0,y=wr.length;y>l;l+=2)B[gr]=wr[l],M[gr]=wr[l+1],gr+=1}return{bondStore:{atomIndex1:B,atomIndex2:M,bondOrder:N},atomStore:{groupIndex:P,xCoord:V,yCoord:k,zCoord:z,bFactor:D,atomId:G,altLabel:T,insCode:E,occupancy:W},groupStore:{chainIndex:j,atomOffset:q,atomCount:H,groupTypeId:J,groupId:K,secStruct:Q},chainStore:{modelIndex:R,groupOffset:X,groupCount:Y,chainId:Z,chainName:$},modelStore:{chainOffset:_,chainCount:rr},groupMap:S,unitCell:g.unitCell,spaceGroup:g.spaceGroup,bioAssembly:g.bioAssembly,pdbId:g.pdbId,title:g.title,entityList:g.entityList,experimentalMethods:g.experimentalMethods,resolution:g.resolution,rFree:g.rFree,rWork:g.rWork,numBonds:I,numAtoms:C,numGroups:O,numChains:x,numModels:F,mmtfVersion:g.mmtfVersion,mmtfProducer:g.mmtfProducer}}return g}();