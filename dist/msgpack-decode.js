!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.decodeMsgpack=t()}(this,function(){"use strict";function e(e){function t(e){for(var t={},r=0;e>r;r++){var n=a();t[n]=a()}return t}function r(t){var r=e.subarray(i,i+t);return i+=t,r}function n(t){var r=e.subarray(i,i+t);i+=t;var n=65535;if(t>n){for(var u=[],a=0;a<r.length;a+=n)u.push(String.fromCharCode.apply(null,r.subarray(a,a+n)));return u.join("")}return String.fromCharCode.apply(null,r)}function u(e){for(var t=new Array(e),r=0;e>r;r++)t[r]=a();return t}function a(){var a,s,g,o=e[i];if(0===(128&o))return i++,o;if(128===(240&o))return s=15&o,i++,t(s);if(144===(240&o))return s=15&o,i++,u(s);if(160===(224&o))return s=31&o,i++,n(s);if(224===(224&o))return a=c.getInt8(i),i++,a;switch(o){case 192:return i++,null;case 194:return i++,!1;case 195:return i++,!0;case 196:return s=c.getUint8(i+1),i+=2,r(s);case 197:return s=c.getUint16(i+1),i+=3,r(s);case 198:return s=c.getUint32(i+1),i+=5,r(s);case 199:return s=c.getUint8(i+1),g=c.getUint8(i+2),i+=3,[g,r(s)];case 200:return s=c.getUint16(i+1),g=c.getUint8(i+3),i+=4,[g,r(s)];case 201:return s=c.getUint32(i+1),g=c.getUint8(i+5),i+=6,[g,r(s)];case 202:return a=c.getFloat32(i+1),i+=5,a;case 203:return a=c.getFloat64(i+1),i+=9,a;case 204:return a=e[i+1],i+=2,a;case 205:return a=c.getUint16(i+1),i+=3,a;case 206:return a=c.getUint32(i+1),i+=5,a;case 207:return i+=9,0;case 208:return a=c.getInt8(i+1),i+=2,a;case 209:return a=c.getInt16(i+1),i+=3,a;case 210:return a=c.getInt32(i+1),i+=5,a;case 211:return i+=9,0;case 212:return g=c.getUint8(i+1),i+=2,[g,r(1)];case 213:return g=c.getUint8(i+1),i+=2,[g,r(2)];case 214:return g=c.getUint8(i+1),i+=2,[g,r(4)];case 215:return g=c.getUint8(i+1),i+=2,[g,r(8)];case 216:return g=c.getUint8(i+1),i+=2,[g,r(16)];case 217:return s=c.getUint8(i+1),i+=2,n(s);case 218:return s=c.getUint16(i+1),i+=3,n(s);case 219:return s=c.getUint32(i+1),i+=5,n(s);case 220:return s=c.getUint16(i+1),i+=3,u(s);case 221:return s=c.getUint32(i+1),i+=5,u(s);case 222:return s=c.getUint16(i+1),i+=3,t(s);case 223:return s=c.getUint32(i+1),i+=5,t(s)}throw new Error("Unknown type 0x"+o.toString(16))}var i=0,c=new DataView(e.buffer);return a()}return e});