!function(t){"use strict";function r(t){function r(t){for(var r={},n=0;t>n;n++){var e=o();r[e]=o()}return r}function n(r){var n=t.subarray(a,a+r);return a+=r,n}function e(r){var n=t.subarray(a,a+r);a+=r;var e=65535;if(r>e){for(var i=[],o=0;o<n.length;o+=e)i.push(String.fromCharCode.apply(null,n.subarray(o,o+e)));return i.join("")}return String.fromCharCode.apply(null,n)}function i(t){for(var r=new Array(t),n=0;t>n;n++)r[n]=o();return r}function o(){var o,s,c,f=t[a];if(0===(128&f))return a++,f;if(128===(240&f))return s=15&f,a++,r(s);if(144===(240&f))return s=15&f,a++,i(s);if(160===(224&f))return s=31&f,a++,e(s);if(224===(224&f))return o=u.getInt8(a),a++,o;switch(f){case 192:return a++,null;case 194:return a++,!1;case 195:return a++,!0;case 196:return s=u.getUint8(a+1),a+=2,n(s);case 197:return s=u.getUint16(a+1),a+=3,n(s);case 198:return s=u.getUint32(a+1),a+=5,n(s);case 199:return s=u.getUint8(a+1),c=u.getUint8(a+2),a+=3,[c,n(s)];case 200:return s=u.getUint16(a+1),c=u.getUint8(a+3),a+=4,[c,n(s)];case 201:return s=u.getUint32(a+1),c=u.getUint8(a+5),a+=6,[c,n(s)];case 202:return o=u.getFloat32(a+1),a+=5,o;case 203:return o=u.getFloat64(a+1),a+=9,o;case 204:return o=t[a+1],a+=2,o;case 205:return o=u.getUint16(a+1),a+=3,o;case 206:return o=u.getUint32(a+1),a+=5,o;case 207:return a+=9,0;case 208:return o=u.getInt8(a+1),a+=2,o;case 209:return o=u.getInt16(a+1),a+=3,o;case 210:return o=u.getInt32(a+1),a+=5,o;case 211:return a+=9,0;case 212:return c=u.getUint8(a+1),a+=2,[c,n(1)];case 213:return c=u.getUint8(a+1),a+=2,[c,n(2)];case 214:return c=u.getUint8(a+1),a+=2,[c,n(4)];case 215:return c=u.getUint8(a+1),a+=2,[c,n(8)];case 216:return c=u.getUint8(a+1),a+=2,[c,n(16)];case 217:return s=u.getUint8(a+1),a+=2,e(s);case 218:return s=u.getUint16(a+1),a+=3,e(s);case 219:return s=u.getUint32(a+1),a+=5,e(s);case 220:return s=u.getUint16(a+1),a+=3,i(s);case 221:return s=u.getUint32(a+1),a+=5,i(s);case 222:return s=u.getUint16(a+1),a+=3,r(s);case 223:return s=u.getUint32(a+1),a+=5,r(s)}throw new Error("Unknown type 0x"+f.toString(16))}var a=0,u=new DataView(t.buffer);return o()}function n(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function e(t){return new Int8Array(t.buffer,t.byteOffset,t.byteLength)}function i(t,r){var n,e,i,o=(t.byteOffset,t.byteLength);for(r||(r=new Int16Array(o/2)),n=0,e=0,i=o/2;i>n;++n,e+=2)r[n]=t[e]<<8^t[e+1]<<0;return r}function o(t,r){var n,e,i,o=(t.byteOffset,t.byteLength);for(r||(r=new Int32Array(o/4)),n=0,e=0,i=o/4;i>n;++n,e+=4)r[n]=t[e]<<24^t[e+1]<<16^t[e+2]<<8^t[e+3]<<0;return r}function a(t){return new Int32Array(t.buffer,t.byteOffset,t.byteLength/4)}function u(t,r,n){var e=t.length,i=1/r;n||(n=new Float32Array(e));for(var o=0;e>o;++o)n[o]=t[o]*i;return n}function s(t,r){var n,e;if(!r){var i=0;for(n=0,e=t.length;e>n;n+=2)i+=t[n+1];r=new t.constructor(i)}var o=0;for(n=0,e=t.length;e>n;n+=2)for(var a=t[n],u=t[n+1],s=0;u>s;++s)r[o]=a,o+=1;return r}function c(t){for(var r=1,n=t.length;n>r;++r)t[r]+=t[r-1];return t}function f(t,r,n){var e=t.length/2+r.length;n||(n=new Int32Array(e));for(var i=0,o=0,a=0,u=t.length;u>a;a+=2){var s=t[a],c=t[a+1];n[i]=s,0!==a&&(n[i]+=n[i-1]),i+=1;for(var f=0;c>f;++f)n[i]=n[i-1]+r[o],i+=1,o+=1}return n}function g(t,r,n,e){var s=t.length/4/2+r.length/2;e||(e=new Float32Array(s));var c=a(e),g=f(o(t),i(r),c);return u(g,n,e)}function l(t,r,n){var e=n?a(n):void 0,i=s(o(t),e);return u(i,r,n)}function L(t,r){function i(t){return a?-1===a.indexOf(t):!0}r=r||{};var a=r.ignoreFields,u=(t.numBonds||0,t.numAtoms||0),f=t.groupTypeList.length/4,L=t.chainIdList.length/4,d=t.chainsPerModel.length,h={numGroups:f,numChains:L,numModels:d};["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","entityList","groupList","numBonds","numAtoms","groupsPerChain","chainsPerModel"].forEach(function(r){void 0!==t[r]&&(h[r]=t[r])});var m="bondAtomList";t[m]&&i(m)&&(h[m]=o(t[m]));var v="bondOrderList";t[v]&&i(v)&&(h[v]=n(t[v])),h.xCoordList=g(t.xCoordBig,t.xCoordSmall,1e3),h.yCoordList=g(t.yCoordBig,t.yCoordSmall,1e3),h.zCoordList=g(t.zCoordBig,t.zCoordSmall,1e3);var y="bFactorList",p="bFactorBig",b="bFactorSmall";t[p]&&t[b]&&i(y)&&(h[y]=g(t[p],t[b],100));var C="atomIdList";t[C]&&i(C)&&(h[C]=c(s(o(t[C]))));var U="altLocList";t[U]&&i(U)&&(h[U]=s(o(t[U]),new Uint8Array(u)));var A="occupancyList";t[A]&&i(A)&&(h[A]=l(t[A],100)),h.groupIdList=c(s(o(t.groupIdList))),h.groupTypeList=o(t.groupTypeList);var I="secStructList";t[I]&&i(I)&&(h[I]=e(t[I]));var w="insCodeList";t[w]&&i(w)&&(h[w]=s(o(t[w]),new Uint8Array(f)));var F="sequenceIndexList";t[F]&&i(F)&&(h[F]=c(s(o(t[F])))),h.chainIdList=n(t.chainIdList);var M="chainNameList";return t[M]&&i(M)&&(h[M]=n(t[M])),h}function d(t){function r(t){return String.fromCharCode.apply(null,t).replace(/\0/g,"")}function n(t){var r,n,e=0;for(r=0,n=u.numGroups;n>r;++r){for(var i=u.groupList[u.groupTypeList[r]],o=0,a=i.bondOrderList.length;a>o;++o)t(e+i.bondAtomList[2*o],e+i.bondAtomList[2*o+1],i.bondOrderList[o]);e+=i.atomNameList.length}if(u.bondAtomList)for(r=0,n=u.bondAtomList.length;n>r;r+=2)t(u.bondAtomList[r],u.bondAtomList[r+1],u.bondOrderList?u.bondOrderList[r/2]:null)}function e(t){for(var n=0,e=0,i=u.numGroups;i>e;++e)for(var o=u.groupList[u.groupTypeList[e]],a=0,s=o.atomNameList.length;s>a;++a)t(o.elementList[a],o.atomNameList[a],o.atomChargeList[a],u.xCoordList[n],u.yCoordList[n],u.zCoordList[n],u.bFactorList?u.bFactorList[n]:null,u.atomIdList?u.atomIdList[n]:null,u.altLocList?r([u.altLocList[n]]):null,u.occupancyList?u.occupancyList[n]:null),n+=1}function i(t){for(var n=0,e=0,i=u.numGroups;i>e;++e){var o=u.groupList[u.groupTypeList[e]],a=o.atomNameList.length;t(o.groupName,o.singleLetterCode,o.chemCompType,u.groupIdList[e],u.groupTypeList[e],u.secStructList?u.secStructList[e]:null,u.insCodeList?r([u.insCodeList[e]]):null,u.sequenceIndexList?u.sequenceIndexList[e]:null,n,a),n+=a}}function o(t){for(var n=0,e=0;e<u.numChains;++e){var i=u.groupsPerChain[e];t(r(u.chainIdList.subarray(e,e+4)),u.chainNameList?r(u.chainNameList.subarray(e,e+4)):null,n,i),n+=i}}function a(t){for(var r=0,n=0;n<u.numModels;++n){var e=u.chainsPerModel[n];t(r,e),r+=e}}var u=t;this.eachBond=n,this.eachAtom=e,this.eachGroup=i,this.eachChain=o,this.eachModel=a}function h(t,n){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var e;return e=t instanceof Uint8Array?r(t):t,L(e,n)}var m=d;t.decode=h,t.Iterator=m}(this.MMTF=this.MMTF||{});