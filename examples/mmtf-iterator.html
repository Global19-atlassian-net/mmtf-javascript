<!DOCTYPE html>
<html lang="en">
<head>
    <title>MmtfIterator example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>
<body>
    <script src="../dist/mmtf.js"></script>
    <script>

        document.addEventListener( "DOMContentLoaded", function(){

            // request mmtf file as binary data (arraybuffer)
            var xhr = new XMLHttpRequest();
            xhr.addEventListener( "load", function onload(){
                // decode the binary response data
                var mmtfData = MMTF.decode( this.response );
                // create mmtfIterator instance
                var mmtfIterator = new MMTF.Iterator( mmtfData );
                // loop over all groups and display the data in #text
                var groupIndex = 0;
                mmtfIterator.eachGroup(
                    function(
                        groupName, singleLetterCode, chemCompType, groupId, groupType,
                        secStruct, insCode, sequenceIndex, atomOffset, atomCount
                    ){
                        document.getElementById( "text" ).innerText += [
                            groupIndex, groupName, singleLetterCode, chemCompType, groupId, groupType,
                            secStruct, insCode, sequenceIndex, atomOffset, atomCount
                        ].join( ", " ) + "\n";
                        groupIndex += 1;
                    }
                );
            }, true );
            xhr.responseType = "arraybuffer";
            xhr.open( "GET", "../data/4cup.mmtf" );
            xhr.send();

        } );

    </script>

    <div>
        <h3>Load MMTF file and decode. Use an MMTF.Iterator instance loop over each group and print its data.</h3>
        <pre id="text"></pre>
    </div>
</body>
</html>
